<!DOCTYPE html>
<html>
<head>
  <title>Time History</title>
</head>
<body>
  <h1>Tracked Sessions</h1>
  <table border="1">
    <tr>
      <th>Start Time</th>
      <th>End Time</th>
      <th>Duration</th>
    </tr>
    {% for e in entries %}
    <tr>
      <td><span class="datetime" data-utc="{{ e.start_time|date:'c' }}"></span></td>
      <td><span class="datetime" data-utc="{{ e.end_time|date:'c'|default:"Active" }}"></span></td>
      <td>{{ e.duration }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="3">No time tracked yet.</td></tr>
    {% endfor %}
  </table>
  <p><a href="{% url 'timer_view' %}">Back to Timer</a></p>

  <script>
    document.querySelectorAll('.datetime').forEach(el => {
        const utc = el.dataset.utc;
        if (utc) {
        const localTime = new Date(utc);
        el.textContent = localTime.toLocaleString(); // automatically shows in local timezone
        }
    });
  </script>

</body>
</html>
